{"version":3,"file":"lettergroup.min.js","sources":["../src/lettergroup.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for the letter group.\n *\n * @module     block_townsquare/lettergroup\n * @copyright  2025 Tamaro Walter\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst letterboxes = document.getElementsByClassName('ts-letter-box');\n\nconst Selectors = {\n    actions: {\n        collapsegroup: '[data-action=\"block_townsquare/collapse_group\"]',\n    },\n};\n\n/**\n * Init function. Adds event listener to orientation marker of letter group to enable\n * collapsing a letter group.\n */\nexport function init() {\n    letterboxes.forEach(\n        (element) => {\n            element.style.maxHeight = `${element.scrollHeight}px`;\n            element.setAttribute('expanded', 'true');\n        }\n    );\n\n    document.addEventListener('click', e => {\n        const group = e.target.closest(Selectors.actions.collapsegroup);\n        if (group) {\n            const icon = group.querySelector('i');\n            let groupid = group.dataset.groupid;\n            letterboxes.forEach(\n                (element) => {\n                    if (element.dataset.groupid === groupid) {\n                        if (element.getAttribute('expanded') === 'true') {\n                            icon.classList.remove('fa-chevron-down');\n                            icon.classList.add('fa-chevron-up');\n                            element.style.maxHeight = '0px';\n                            element.setAttribute('expanded', 'false');\n                        } else {\n                            icon.classList.remove('fa-chevron-up');\n                            icon.classList.add('fa-chevron-down');\n                            element.style.maxHeight = `${element.scrollHeight}px`;\n                            element.setAttribute('expanded', 'true');\n                        }\n                    }\n                }\n            );\n        }\n    });\n}"],"names":["letterboxes","forEach","element","style","maxHeight","scrollHeight","setAttribute","document","addEventListener","e","group","target","closest","Selectors","actions","collapsegroup","icon","querySelector","groupid","dataset","getAttribute","classList","remove","add","getElementsByClassName"],"mappings":"2IAmCO,WACHA,YAAYC,QACPC,UACGA,QAAQC,MAAMC,UAAY,GAAGF,QAAQG,iBACrCH,QAAQI,aAAa,WAAY,UAIzCC,SAASC,iBAAiB,QAASC,IAC/B,MAAMC,MAAQD,EAAEE,OAAOC,QAAQC,UAAUC,QAAQC,eACjD,GAAIL,MAAO,CACP,MAAMM,KAAON,MAAMO,cAAc,KACjC,IAAIC,QAAUR,MAAMS,QAAQD,QAC5BlB,YAAYC,QACPC,UACOA,QAAQiB,QAAQD,UAAYA,UACa,SAArChB,QAAQkB,aAAa,aACrBJ,KAAKK,UAAUC,OAAO,mBACtBN,KAAKK,UAAUE,IAAI,iBACnBrB,QAAQC,MAAMC,UAAY,MAC1BF,QAAQI,aAAa,WAAY,WAEjCU,KAAKK,UAAUC,OAAO,iBACtBN,KAAKK,UAAUE,IAAI,mBACnBrB,QAAQC,MAAMC,UAAY,GAAGF,QAAQG,iBACrCH,QAAQI,aAAa,WAAY,WAKrD,GAER;;;;;;;;AA5CA,MAAMN,YAAcO,SAASiB,uBAAuB,iBAE9CX,UAAY,CACdC,QAAS,CACLC,cAAe,mDAwCtB"}